# 7 консольных инструментов для мониторинга системы

## 1. top и htop  
top - незаменимая программа, которая есть в каждом дистрибутиве. Показывает активность процессов в системе,  
нагрузку на процессор, использование памяти и т.д.  
Наиболее используемые мною хоткеи:  
h - справкаZ - настройка цветов  
A - выводит наиболее прожорливые процессы  
u - показать процессы определённого пользователя  
O - выбор метода сортировки  
k - убить процесс  
q - выход из программы.  
  
htop - это продвинутый top, и информация выводимая им более удобна для восприятия.  

## 2. dstat  

Одна из моих любимых утилит. Это vmstat, iostat, netstat, nfsstat и ifstat в одном флаконе.  

Пара опций, которыми я чаще всего пользуюсь:  
-c цпу статистика  
-d статистика по жёсткому диску  
-m использование памяти  
-n использование сети  

## 3. ps  

очень полезная команда. Делает снимок протекающих в данный момент времени в системе процессов.  
Если к примеру нужно убить подвешивающий систему процесс как можно быстрее, а для этого нужно узнать его PID, то можно сделать так:  

> ps -A | grep -i java  

И эта команда нам выдаст:  

> 7789 ? 00:05:44 java  

Ну а потом с чистым сердцем:  

> kill -9 7789  

Списко опций прямо-таки гигантский, поэтому:  

> man ps  


4. du и df  

Эти команды незаменимы, когда требуется уточнить чем же занято всё свободное место.  
Для получения размера папки:  

> du -sh ~/Pictures/  

Чтобы вывести размеры всех файлов и каталогов в текущем каталоге:  

> du -ah  

Команда df выводит отчёт об использовании дискового пространства.  

> df -hT  

Но гораздо легче и удобнее использовать утилиту [ncdu](http://dev.yorhel.nl/ncdu) написанную с использованием ncurses:  

  

[![](http://1.bp.blogspot.com/_X4XfJEPKE6Y/Sr35zeY4IDI/AAAAAAAAAJ0/FpKeawn5xfM/s200/ncdu_help.png)](http://1.bp.blogspot.com/_X4XfJEPKE6Y/Sr35zeY4IDI/AAAAAAAAAJ0/FpKeawn5xfM/s1600-h/ncdu_help.png)  

[![](http://1.bp.blogspot.com/_X4XfJEPKE6Y/Sr35dZQItXI/AAAAAAAAAJs/XEnB-mH2DOg/s200/ncdu.png)](http://1.bp.blogspot.com/_X4XfJEPKE6Y/Sr35dZQItXI/AAAAAAAAAJs/XEnB-mH2DOg/s1600-h/ncdu.png)  

  
  
  
  
  
  
  
  
  
  
  

  
  
  
  
  
  
5. iptraf  

Пригодится, когда возникает необходимость в контроле за данными пересылаемыми через сетевой интерфейс или для просмотра статистики пo  
соединениям.  

  
[![](http://2.bp.blogspot.com/_X4XfJEPKE6Y/Sr39iKHePTI/AAAAAAAAAKM/yTPMkSJ9OyQ/s200/iptraf_1.png)](http://2.bp.blogspot.com/_X4XfJEPKE6Y/Sr39iKHePTI/AAAAAAAAAKM/yTPMkSJ9OyQ/s1600-h/iptraf_1.png)[![](http://2.bp.blogspot.com/_X4XfJEPKE6Y/Sr39VFKaZMI/AAAAAAAAAKE/nwVmT-9d70Y/s200/iptraf.png)](http://2.bp.blogspot.com/_X4XfJEPKE6Y/Sr39VFKaZMI/AAAAAAAAAKE/nwVmT-9d70Y/s1600-h/iptraf.png)  
  
  
  
  
  
  
  
  
  
  

  
  
  
  
  
  
  
  
**6. lsof (glsof)  
**  

Запустив эту утилиту без параметров, вы получите громадный список всех процессов системы и открытых ими файлов. Понятно, что эту кучу инфы надо как-то уменьшить в зависимости от того, что вы ищите.  
Например, чтобы узнать какой процесс или процессы использует данный файл, нужно просто набрать:  

> lsof /var/log/messages.log  

Вывести список открытых портов и процессов, которые эти порты используют:  

> lsof -i  

Какие файлы в определённой папке используются в данный момент (пригодится если к примеру не можете отмонтировать флешку):  

> lsof +D /media/disk  

Ну и напоследок, чтобы узнать, какие файлы читает нужный вам процесс:  

> lsof -c <процесс>  

Под **lsof** есть и графическая обёртка [glsof](http://sourceforge.net/apps/trac/glsof), про которую я совсем недавно узнал. (Хоть это к теме и не относится, но скрин выложу)  
  

[![](http://4.bp.blogspot.com/_X4XfJEPKE6Y/SsDimE_JhPI/AAAAAAAAAKU/yhpM7bO5U0k/s200/glsof.png)](http://4.bp.blogspot.com/_X4XfJEPKE6Y/SsDimE_JhPI/AAAAAAAAAKU/yhpM7bO5U0k/s1600-h/glsof.png)  

  
  

  
  
  
  
  
  
  
7. ccze  
  

Лучше чем **ccze** для просмотра логов я пока ещё ничего не нашёл, да и искать незачем. О ней я писал в этом [посте](http://lamernotes.blogspot.com/2009/03/ccze.html).